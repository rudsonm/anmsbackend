angular.module("Module",["restangular","ngMaterial","md.data.table","ngMessages","ngResource","ngRoute"]).config(function(n,t){n.setBaseUrl("http://localhost:49664/api/");var i=sessionStorage.webmenu_generated_token;i&&n.setDefaultHeaders({Authorization:i});t.theme("default").primaryPalette("blue").accentPalette("brown",{"default":"600"})}),function(){function n(n){function i(t,i){let u=r(t,i);n.show(u)}function r(n,t){switch(n){case 200:return f(t);case 400:return e(t);case 404:return o(t);case 403:return s(t);case 500:return h(t);default:return u(n)}}function u(n){return t(n)}function f(n){return n=n||"Alterações salvas com sucesso",t(n,"done","green")}function e(n){return n=n||"Requisição inválida",t(n,"warning","orange")}function o(n){return n=n||"Recurso não encontrado",t(n,"warning","orange")}function s(n){return n=n||"Você não possui acesso",t(n,"clear","red")}function h(n){return n=n||"Erro interno, tente novamente mais tarde",t(n,"cloud_off","blue")}function t(n,t,i){return{hideDelay:3e3,position:"top right",templateUrl:"Templates/Toast.html",locals:{content:n,icon:t||null,color:i||null},controllerAs:"toastVm",controller:function(n,t,i,r){toastVm=this;toastVm.content=t;toastVm.icon=i;toastVm.color=r;toastVm.close=n.hide}}}this.Send=i}angular.module("Module").service("ToastService",n)}(),function(){function n(n,t,i){function r(t,i){return i=i||{},n.all(t).getList(i)}function u(t,i){return n.one(t,i).get()}function f(n,t){return t.Id?o(t):e(n,t)}function e(t,i){return n.all(t).post(i)}function o(n){return n.id=n.Id||n.id,n.put()}function s(t,i){return n.one(t,i).remove()}this.Restangular=n;this.buscar=r;this.buscarUm=u;this.salvar=f;this.remover=s;n.addRequestInterceptor(function(n){return i.adicionarRequisicao(),n});n.addResponseInterceptor(function(n){return i.removerRequisicao(),n});n.addErrorInterceptor(function(n,r,u){return(console.log(n),console.log(r),console.log(u),i.removerRequisicao(),n.status!==200)?(t.Send(n.status>0?n.status:500,""),!1):!0})}angular.module("Module").service("RestService",n)}(),function(){function n(){function u(){return n}function f(){t(1)}function t(t){n+=t||1}function e(){i(1)}function i(t){n-=t||1;n<0&&r()}function r(){n=0}this.requisicoesPendentes=u;this.adicionarRequisicoes=t;this.adicionarRequisicao=f;this.removerRequisicoes=i;this.removerRequisicao=e;this.zerarRequisicoes=r;var n=0}angular.module("Module").service("RequestsListenerService",n)}(),function(){function n(n,t){function i(t){return n.buscar("usuarios",t)}function r(t){return n.buscarUm("usuarios",t)}function u(t){return n.salvar("usuarios",t)}function f(t){return n.remover("usuarios",t)}function e(i){return n.Restangular.all("usuarios/autenticar").post(t({grant_type:"password",username:i.CpfCnpj,password:i.Senha}),{},{"Content-Type":"application/x-www-form-urlencoded"})}return{buscar:i,buscarUm:r,salvar:u,remover:f,autenticar:e}}angular.module("Module").factory("UsuarioResource",n)}(),function(){angular.module("Module").factory("ProdutoResource",["$resource",function(n){return n("http://localhost:49664/api/produtos/:id",{id:"@id"},{buscar:{method:"GET",isArray:!0},buscarUm:{method:"GET",params:{id:"@id"},isArray:!1},salvar:{method:"POST",isArray:!1},editar:{method:"PUT",params:{id:"@id"},isArray:!1},remover:{method:"DELETE",params:{id:"@id"},isArray:!1}})}])}(),function(){angular.module("Module").factory("MesaResource",["$resource",function(n){return n("http://localhost:49664/api/mesas/:id",{id:"@id"},{buscar:{method:"GET",isArray:!0},buscarUm:{method:"GET",params:{id:"@id"},isArray:!1},salvar:{method:"POST",isArray:!1},editar:{method:"PUT",params:{id:"@id"},isArray:!1},remover:{method:"DELETE",params:{id:"@id"},isArray:!1}})}])}(),function(){angular.module("Module").factory("ComandaResource",["$resource",function(n){return n("http://localhost:49664/api/comandas/:id",{id:"@id"},{buscar:{method:"GET",isArray:!0},buscarUm:{method:"GET",params:{id:"@id"},isArray:!1},salvar:{method:"POST",isArray:!1},editar:{method:"PUT",params:{id:"@id"},isArray:!1},remover:{method:"DELETE",params:{id:"@id"},isArray:!1}})}])}(),function(){angular.module("Module").factory("CategoriaResource",["$resource",function(n){return n("http://localhost:49664/api/categorias/:id",{id:"@id"},{buscar:{method:"GET",isArray:!0},buscarUm:{method:"GET",params:{id:"@id"},isArray:!1},salvar:{method:"POST",isArray:!1},editar:{method:"PUT",params:{id:"@id"},isArray:!1},remover:{method:"DELETE",params:{id:"@id"},isArray:!1}})}])}(),function(){angular.module("Module").filter("telefone",function(){return function(n){var t=n.length-10,i=n.slice(0,2),r=n.slice(2,6+t),u=n.slice(6+t,10+t);return"("+i+") "+r+"-"+u}})}(),function(){angular.module("Module").directive("ngTooltip",[function(){return{restrict:"A",compile:function(n,t){let i=t.ngTooltip,r=t.ngDirection||"left",u="<md-tooltip data-md-delay='50' data-md-direction='"+r+"'>"+i+"<\/md-tooltip>";n.append(u)}}}])}(),function(){angular.module("Module").directive("ngMask",[function(){return{restrict:"A",link:function(n,t,i){switch(i.ngMask){case"date":$(t).mask("00/00/0000");break;case"time":$(t).mask("00:00");break;case"phone":$(t).mask("(00) 00000-0000");break;case"money":$(t).mask("0,000,000.00",{reverse:!0});break;case"cpf":$(t).mask("000.000.000-00")}}}}])}(),function(){angular.module("Module").directive("ngEnter",function(){return function(n,t,i){t.bind("keydown keypress",function(t){t.which===13&&(n.$apply(function(){n.$eval(i.ngEnter,{event:t})}),t.preventDefault())})}})}(),function(){function n(n,t){function i(i){let r=n.salvar(i);r.then(function(){t.Send(200,"Usuário salvo com sucesso")})}function r(i){let r=n.autenticar(i);r.then(function(n){var i=n.token_type+" "+n.access_token;sessionStorage.webmenu_generated_token=i;t.Send(200,"Autenticação concluída com sucesso");usuarioVm.usuario={}})}usuarioVm=this;usuarioVm.salvar=i;usuarioVm.autenticar=r}angular.module("Module").controller("UsuarioController",n)}(),function(){function n(n,t){function u(){let t=n.buscar("categorias");t.then(function(n){i.categorias=n})}function r(){let t=n.buscar("produtos");t.then(function(n){i.produtos=n})}function f(t){let r=n.buscarUm("produtos",t);r.then(function(n){return i.irParaFormulario(n)})}function e(n){i.produto=n||{};i.editando=!0}function o(r){let u=n.remover("produtos",r.Id);u.then(function(){i.buscarProdutos();t.Send(200,"Produto salvo com sucesso")})}function s(u){let f=n.salvar("produtos",u);f.then(function(){r();t.Send(200,"Produto salvo com sucesso");i.editando=!1})}var i=this;i.editando=!1;i.buscarProdutos=r;i.buscarProduto=f;i.irParaFormulario=e;i.remover=o;i.salvar=s;u();r()}angular.module("Module").controller("ProdutoController",n)}();angular.module("Module").controller("PedidoController",function(n){function r(){let r=n.buscar("consumos");r.then(function(n){i.consumos=t(n);setTimeout(function(){console.log(t(n))})})}function t(n){return n=n.filter(function(n,t){return n.span={row:1,col:1},t<=3&&(n.span.row=t,n.span.col=t-1),n}),n.orderBy(function(n){n.span.col})}var i=this;setTimeout(function(){r()},500)}),function(){function n(n,t){function r(){let t=n.buscar("mesas");t.then(function(n){i.mesas=n;n.forEach(function(n){n.Comandas=u(n)})})}function u(t){let i=n.buscar("comandas",{mesa:t.Id});i.then(function(n){t.Comandas=n})}function f(n){i.mesa=n||{};i.editando=!0}function e(i){let u=n.remover("mesas",i);u.then(function(){t.Send("Mesa removida com sucesso");r()})}function o(r){let u=n.salvar("mesas",r);u.then(function(n){t.Send("Mesa salva com sucesso");r.Id||i.mesas.push(n);i.editando=!1})}var i=this;i.editando=!1;i.irParaFormulario=f;i.remover=e;i.salvar=o;r()}angular.module("Module").controller("MesaController",n)}(),function(){function n(n,t,i){function r(){n("side-nav").toggle()}function u(){var n=sessionStorage.webmenu_generated_token;n&&(t.defaults.headers.common.Authorization=n)}mainVm=this;mainVm.toggleSidenav=r;mainVm.requisicoesPendentes=i.requisicoesPendentes;u()}angular.module("Module").controller("MainController",n)}(),function(){function n(n,t,i,r,u){function c(){r.cancel()}function o(){v();f.consumo=angular.copy(e);u("consumo-sidenav").toggle()}function s(){u("consumo-sidenav").toggle()}function l(n){return n.sum(function(n){return n.Adicionais.length})}function a(n){return n.sum(function(n){return n.Produto.Preco})}function h(n){return n.groupBy(function(n){return n.Produto.Id})}function v(){let t=n.buscar("categorias",{tipo:"PRODUTO"});t.then(function(n){f.categorias=n})}function y(t){let i=n.buscar("produtos",{categoria:t.Id});i.then(function(n){f.produtos=n})}function p(t){t=t||f.comanda;let i=n.buscarUm("comandas",t.Id);i.then(function(n){f.comanda=n;n.Consumos.length?f.grupoConsumos=h(n.Consumos):o()})}function w(t){let r=n.salvar("consumos",t);r.then(function(){i.Send(200,"Consumo salvo com sucesso");f.comanda.Consumos.push(t);f.grupoConsumos=h(f.comanda.Consumos);s()})}var f=this,e;f.fechar=c;f.irParaFormulario=o;f.fecharFormulario=s;f.obterTotalAdicionais=l;f.obterPrecoTotal=a;f.buscarProdutos=y;f.salvar=w;p(t);e={Comanda:t,Produto:{Id:null},Categoria:{Id:null}}}angular.module("Module").controller("ConsumoController",n)}(),function(){function n(n,t,i){function u(i){let u=n.salvar("comandas",i);u.then(function(n){t("Comanda salva com sucesso");r.comandas.push(n)})}function f(n,t){i.show({controller:"ConsumoController",controllerAs:"consumoVm",templateUrl:"Templates/Consumo.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!0,fullscreen:!1,locals:{Comanda:n}})}function e(){let t=n.buscar("mesas");t.then(function(n){r.mesas=n})}function o(){let t=n.buscar("comandas");t.then(function(n){r.comandas=n})}var r=this;r.editando=!1;r.salvar=u;r.abrirModalConsumo=f;o();e()}angular.module("Module").controller("ComandaController",n)}(),function(){function n(n,t){function r(){let t=n.buscar("categorias");t.then(function(n){i.categorias=n})}function u(n){i.categoria=n||{};i.editando=!0}function f(i){let u=n.remover("categorias",i);u.then(function(){t.Send(200,"Categoria removida com sucesso");r()})}function e(r){let u=n.salvar("categorias",r);u.then(function(n){t.Send(200,"Categoria salva com sucesso");r.Id||i.categorias.push(n);i.editando=!1})}var i=this;i.editando=!1;i.irParaFormulario=u;i.remover=f;i.salvar=e;r()}angular.module("Module").controller("CategoriaController",n)}();